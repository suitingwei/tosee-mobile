{"version":3,"sources":["play.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"play.js","sourcesContent":["$(document).ready(function(){\n\t$.ajaxSetup({\n\t    headers: {\n\t        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n\t    }\n\t});\n\n\tvar videoDom = $(\"#playvideo\").get(0);\n\tvar playStatus = 'play';\n\tvar videoLoaded = false;\n\n\t$(\"#play\").click(function(){\n\t\t$(this).hide();\n\t\tif( videoLoaded == false ) {\n\t\t\tvideoDom.load();\n\t\t\tvideoLoaded = true;\n\t\t}\n\t\tvideoDom.play();\n\t})\n\n\tdebugEvents(videoDom);\n\n\tif( hasJoinUser == 0 ) {\n\t\tvar minHeight = $(\"#video\").height() - $(window).height() + 50;\n\t\t$(\"#join-user\").css(\"height\", minHeight);\n\t}\n\n\t$(\".answer\").click(function(){\n\t\tvar isChoose = $(this).attr(\"data-choose\");\n\t\tif(isChoose == 1) {\n\t\t\tvar imgSrc = \"http://s.toseeapp.com/mp/img/smile.png\";\n\t\t\tvar imgText = \"竞猜成功！\";\n\t\t} else {\n\t\t\tvar imgSrc = \"http://s.toseeapp.com/mp/img/cry.png\";\n\t\t\tvar imgText = \"竞猜失败！\";\n\t\t}\n\n\t\t$(\"#answer-tip-img\").attr(\"src\", imgSrc);\n\t\t$(\"#answer-tip-text\").html(imgText);\n\n\t\t$(this).children(\"img\").attr(\"src\", \"http://s.toseeapp.com/mp/img/choosed.png\");\n\t\t$(this).children(\"span\").css(\"color\", \"#ed4956\");\n\t\tvar answerTopic = $('#answer-tip');\n\t\tanswerTopic.modal(\"show\");\n\t})\n\n\t$(\"#praise, #praise-img\").click(function(ev) {\n\t\tvar opacity = $(\"#praise\").css(\"opacity\");\n\t\tif( opacity == 1 ) {\n\t\t\t$(\"#praise-img\").attr(\"src\", \"http://s.toseeapp.com/mp/img/praise_hollow.png\");\n\t\t\t$(\"#praise\").css(\"background\", \"#222222\").css(\"opacity\", 0.14);\n\t\t} else {\n\t\t\t$(\"#praise-img\").attr(\"src\", \"http://s.toseeapp.com/mp/img/praise_honest.png\");\n\t\t\t$(\"#praise\").css(\"background\", \"#ed4956\").css(\"opacity\", 1);\n\t\t}\n\t\tvar topicId = $(\"#praise-img\").attr(\"data-id\");\n\t\t$.post(\"/mp/parise\", {topicId: topicId});\n\t})\n\n\t$(\"#share, #share-img\").click(function(ev) {\n\t\t$(\"#share-component\").modal(\"show\");\n\t});\n\n\t$(\".component\").click(function(){\n\t\t$(this).siblings().css(\"opacity\", 1).children(\".name\").css(\"opacity\", 1);\n\t\t$(this).css(\"opacity\", 0.5).children(\".name\").css(\"opacity\", 0.5);\n\t\t$(\"#share-tip\").modal(\"show\");\n\t});\n\n\t$(\".cancel\").click(function(ev) {\n\t\t$(this).css(\"opacity\", 0.5);\n\t\t$(\"#share-component\").modal(\"hide\");\n\t\t$(\"#share-tip\").modal(\"hide\");\n\t});\n\n\t$(\"#share-component\").on('hidden.bs.modal', function (e) {\n\t\t$(\"#share-img\").attr(\"src\", \"http://s.toseeapp.com/mp/img/share.png\");\n\t\t$(\".component\").css(\"opacity\", 1).children(\".name\").css(\"opacity\", 1);\n\t\t$(\".cancel\").css(\"opacity\", 1);\n\t});\n\n\t$(\"#answer-tip\").on(\"hidden.bs.modal\", function(e){\n\t\t$(\".answer\").children(\"img\").attr(\"src\", \"http://s.toseeapp.com/mp/img/choose.png\");\n\t\t$(\".answer\").children(\"span\").css(\"color\", \"#fff\");\n\t});\n\n\t$(\"#show-answer\").click(function(ev) {\n\t\t$('#answer-tip').modal(\"hide\");\n\t\t$(\"#topic\").hide();\n\t\tvideoDom.play();\n\t});\n\n\tfunction debugEvents(video) {\n\t\t[\n\t\t\t'loadstart',\n\t\t\t'progress',\n\t\t\t'suspend',\n\t\t\t'abort',\n\t\t\t'error',\n\t\t\t'emptied',\n\t\t\t'stalled',\n\t\t\t'loadedmetadata',\n\t\t\t'loadeddata',\n\t\t\t'canplay',\n\t\t\t'canplaythrough',\n\t\t\t'playing', // fake event\n\t\t\t'waiting',\n\t\t\t'seeking',\n\t\t\t'seeked',\n\t\t\t'ended',\n\t\t    'durationchange',\n\t\t\t'timeupdate',\n\t\t\t'play', // fake event\n\t\t\t'pause', // fake event\n\t        'ratechange',\n\t\t    'resize',\n\t\t    'volumechange',\n\t\t\t'webkitbeginfullscreen',\n\t\t\t'webkitendfullscreen',\n\t\t].forEach(function (event) {\n\t\t\tvideo.addEventListener(event, function () {\n\t\t\t\tcurrentTime = video.currentTime;\n\t\t\t\tif( currentTime >= $(\"#playvideo\").attr(\"data-time\") && playStatus == 'play' ) {\n\t\t\t\t\tplayStatus = 'pause';\n\t\t\t\t\tvideo.pause();\n\t\t\t\t\t$(\"#topic\").show();\n\t\t\t\t//\tvideo.webkitExitFullscreen();\n\t\t\t\t}\n\t\t\t\tif( event == 'ended' ) {\n\t\t\t\t\tplayStatus = 'play';\n\t\t\t\t\t$(\"#play\").show();\n\t\t\t\t\t//video.webkitExitFullscreen();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n});\n"]}